<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Buscador de Iniciativas</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <h1>Buscador de Iniciativas del Pleno de Alicante</h1>
    <form method="get">
        <select name="grupo">
            <option value="">-- Grupo político --</option>
            {% for g in grupos %}
                <option value="{{ g }}" {% if request.args.get('grupo') == g %}selected{% endif %}>{{ g }}</option>
            {% endfor %}
        </select>
        <input type="text" name="titulo" placeholder="Palabra clave en el título" value="{{ request.args.get('titulo', '') }}">
        <select name="resultado">
            <option value="">-- Resultado --</option>
            {% for r in resultados_list %}
                <option value="{{ r }}" {% if request.args.get('resultado') == r %}selected{% endif %}>{{ r }}</option>
            {% endfor %}
        </select>
        <select name="fecha">
            <option value="">-- Fecha del Pleno --</option>
            {% for f in fechas %}
                <option value="{{ f }}" {% if request.args.get('fecha') == f %}selected{% endif %}>{{ f }}</option>
            {% endfor %}
        </select>
        <button type="submit">Buscar</button>
    </form>
    <table>
        <tr>
            <th>Fecha</th>
            <th>Grupo</th>
            <th>Contenido</th>
            <th>Resultado</th>
        </tr>
        {% for row in resultados %}
        <tr>
            <td>{{ row["fecha"] }}</td>
            <td>{{ row["grupo"] }}</td>
            <td>{{ row["contenido"] }}</td>
            <td>{{ row["resultado"] }}</td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>
